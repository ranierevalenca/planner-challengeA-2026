<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Planner de Estudos — Challenge A</title>

<style>
:root{
  --bg:#f7f6f3;
  --paper:#fffefc;
  --accent:#8aa29e;
  --muted:#6b6b6b;
  --soft:#f0ebe6;
  --shadow:0 6px 18px rgba(0,0,0,.08);
  --dot:rgba(0,0,0,.25);
  --today:#fff2cc;
}

html,body{
  margin:0;
  background:var(--bg);
  font-family:"Times New Roman",serif;
}

.wrap{
  max-width:1100px;
  margin:24px auto;
  padding:20px;
}

header{
  display:flex;
  gap:16px;
  align-items:center;
}

.brand{
  background:linear-gradient(90deg,var(--accent),#b7c8c0);
  color:#fff;
  padding:14px 18px;
  border-radius:12px;
  box-shadow:var(--shadow);
}

.controls{
  margin:18px 0;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

button,select,input[type="date"]{
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #ddd;
  background:#fff;
}

button.primary{
  background:var(--accent);
  color:#fff;
  border:none;
}

.week{
  background:var(--paper);
  padding:18px;
  border-radius:12px;
  box-shadow:var(--shadow);
  margin-bottom:18px;
}

.week h3{margin:0}

.date-box{
  display:flex;
  gap:8px;
  margin:8px 0;
  font-size:13px;
  align-items:center;
}

.date-box span{
  font-weight:bold;
}

.date-display{
  border-bottom:2px dotted var(--dot);
  min-width:120px;
  padding:4px;
}

.axes{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:12px;
}

.axis{
  background:var(--soft);
  padding:10px;
  border-radius:8px;
}

.axis h5{
  margin:0 0 6px;
  font-size:13px;
}

.field{
  border-bottom:2px dotted var(--dot);
  min-height:28px;
}

.daily{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
  margin-top:12px;
}

.day{
  background:#fff;
  border:1px solid #eee;
  border-radius:8px;
  padding:6px;
  min-height:90px;
}

.day.today{
  background:var(--today);
}

.day h6{
  margin:0 0 4px;
  font-size:13px;
}

.day .date{
  font-size:11px;
  color:var(--muted);
}

.f{
  border-bottom:1px dashed #ccc;
  min-height:32px;
}

.notes{
  border:1px dashed #ccc;
  border-radius:8px;
  padding:10px;
  min-height:70px;
  margin-top:8px;
}

footer{
  text-align:center;
  color:#777;
  margin-top:24px;
  font-size:13px;
}

@media print{
  .controls,header,footer{display:none}
  body{background:#fff}
  .week{page-break-inside:avoid}
}
</style>
</head>

<body>
<div class="wrap">

<header>
  <div class="brand">
    <h2>Planner Challenge A</h2>
    <div style="font-size:12px">Educação Clássica Cristã</div>
  </div>
  <div>
    <p><strong>Tema:</strong> Firmes na Verdade</p>
    <p style="font-style:italic;color:#555">2 Pedro 3:18</p>
  </div>
</header>

<div class="controls">
  <button onclick="mostrarTodas()">Mostrar todas</button>

  <label>
    Semana:
    <select id="seletor" onchange="mostrarSemana(this.value)">
      <option value="">-- selecione --</option>
    </select>
  </label>

  <label>
    Início da semana:
    <input type="date" id="calendario" onchange="aplicarDatas()">
  </label>

  <button onclick="imprimirSemana()">Imprimir semana</button>
  <button onclick="baixarSemana()">Baixar semana</button>
  <button class="primary" onclick="window.print()">Imprimir tudo</button>
</div>

<main id="planner"></main>

<footer>
Planner interativo • GitHub Pages • Raniere Dantas Valença
</footer>

</div>

<script>
const planner = document.getElementById("planner");
const seletor = document.getElementById("seletor");
const calendario = document.getElementById("calendario");
const TOTAL = 52;
const dias = ["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"];

for(let i=1;i<=TOTAL;i++){
  const sec=document.createElement("section");
  sec.className="week";
  sec.id="week-"+i;
  sec.innerHTML=`
    <h3>Semana ${i}</h3>

    <div class="date-box">
      <span>Início:</span><div class="date-display start"></div>
      <span>Fim:</span><div class="date-display end"></div>
    </div>

    <div class="axes">
      ${["Lógica","Gramática","Pesquisa","Redação","Geografia","Retórica"]
        .map(a=>`<div class="axis"><h5>${a}</h5><div class="field" contenteditable></div></div>`).join("")}
    </div>

    <div class="daily">
      ${dias.map(d=>`
        <div class="day">
          <h6>${d}</h6>
          <div class="date"></div>
          <div class="f" contenteditable></div>
        </div>`).join("")}
    </div>

    <h4>Tutoria / Reflexão</h4>
    <div class="notes" contenteditable></div>
  `;
  planner.appendChild(sec);

  const opt=document.createElement("option");
  opt.value=i;
  opt.text="Semana "+i;
  seletor.appendChild(opt);
}

// ---------- Funções principais ----------
function mostrarTodas(){
  document.querySelectorAll(".week").forEach(w=>w.style.display="block");
  seletor.value="";
}

function mostrarSemana(n){
  if(!n){mostrarTodas();return}
  document.querySelectorAll(".week").forEach(w=>w.style.display="none");
  const week=document.getElementById("week-"+n);
  week.style.display="block";
  calendario.scrollIntoView({behavior:"smooth"});
}

function aplicarDatas(){
  const n=seletor.value;
  if(!n)return;

  const inicio=new Date(calendario.value+"T00:00");
  if(isNaN(inicio))return;

  const week=document.getElementById("week-"+n);
  const end=new Date(inicio);
  end.setDate(inicio.getDate()+6);

  week.querySelector(".start").textContent=inicio.toLocaleDateString();
  week.querySelector(".end").textContent=end.toLocaleDateString();

  const dayEls=week.querySelectorAll(".day");
  dayEls.forEach((d,i)=>{
    const data=new Date(inicio);
    data.setDate(inicio.getDate()+i);
    d.querySelector(".date").textContent=data.toLocaleDateString();

    d.classList.toggle("today",
      data.toDateString()===new Date().toDateString()
    );
  });

  salvarTudo();
}

function imprimirSemana(){
  const n=seletor.value;
  if(!n){alert("Selecione uma semana");return}
  mostrarSemana(n);
  setTimeout(()=>window.print(),50);
}

function baixarSemana(){
  const n=seletor.value;
  if(!n){alert("Selecione uma semana");return}
  const semana=document.getElementById("week-"+n).outerHTML;
  const html=`<!doctype html><html><head><meta charset="utf-8"><title>Semana ${n}</title></head><body>${semana}</body></html>`;
  const blob=new Blob([html],{type:"text/html"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download=`Semana_${n}_Planner_ChallengeA.html`;
  a.click();
  URL.revokeObjectURL(a.href);
}

// ---------- AUTOSAVE ----------
function salvarTudo(){
  localStorage.setItem("planner_data", planner.innerHTML);
}

function restaurarTudo(){
  const data=localStorage.getItem("planner_data");
  if(data) planner.innerHTML=data;
}

document.addEventListener("input",e=>{
  if(e.target.hasAttribute("contenteditable")) salvarTudo();
});

window.addEventListener("load",restaurarTudo);
</script>

</body>
</html>
